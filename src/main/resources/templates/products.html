<div xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<div class="container mb-4">
  <div class="row" style="padding:10px 10px 10px 10px; width:300px;">
  <form method="GET" action="/products">
  <div class="input-group">

    <input name="searchByCategory" type="search" class="form-control rounded" placeholder="Search" aria-label="Search by category" aria-describedby="search-addon" />
    <button type="submit" class="btn btn-primary">Search</button>
  </div>
  </form>
    </div>
    <div class="row">
      <div class="col-12" th:if="${products.size() > 0}">
        <div class="table-responsive">
          <table class="table table-striped table-light">
            <thead class="thead-dark">
            <tr>
              <th scope="col">Product name</th>
              <th scope="col">Price</th>
              <th scope="col">Category</th>
              <th scope="col">Image</th>
              <th scope="col">&nbsp</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="product : ${products}" class="product">
              <td th:text="${product.getName()}"></td>
              <td th:text="${product.getPrice()}">&nbsp;<strong> $</strong></td>
              <td th:text="${product.getCategory() != null}
                            ? ${product.getCategory().getName()} : 'No Category'"></td>
              <td><img style="height:100px;" th:src="${product.getImageUrl()}"></td>
              <td class="text-right">
                  <form sec:authorize="hasRole('ROLE_ADMIN')"
                          th:action="@{'/products/delete/{id}' (id=${product.getId()})}"
                        th:method="DELETE">
                    <button type="submit"
                            class="btn btn-sm btn-danger delete-product">
                      <i class="fa fa-trash">Delete</i>
                    </button>
                  </form>
                  <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{'/products/edit-form/{id}' (id=${product.getId()})}"
                     class="btn btn-sm btn-warning edit-product">
                    <i class="fa fa-trash">Edit</i>
                  </a>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col mb-3">
        <div sec:authorize="hasRole('ROLE_ADMIN')" class="row">
            <a href="/products/add-form" class="btn btn-block btn-dark add-product-btn">
              Add new product
            </a>
        </div>
      </div>
    </div>
  </div>
</div>
